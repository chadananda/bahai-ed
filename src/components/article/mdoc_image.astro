---
import { baseURL, getArticleSlugFromURL, generateArticleImage, getPostFromSlug } from '@utils/utils.js';

const { src, alt } = Astro.props;
const slug = getArticleSlugFromURL(Astro.url.href)
const post = Astro.props.post || await getPostFromSlug(slug);
const base_url = baseURL(Astro);

// imgfile, post, baseUrl="", width, height=100, format='webp', quality=80, alt=""
const img = await generateArticleImage(src, post, base_url, 750, 0, 'webp', 90, alt);
---
<img {...img} loading="lazy" />
